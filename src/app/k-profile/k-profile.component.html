<!-- k-profile.component.html -->
<div class="k-profile-wrapper">
  <!-- Header -->
  <header>
    <div class="k-profile-header">
      <div class="header-logo">K-Profile</div>
      <div class="header-actions">
        <button class="notification-btn">
          <i class="fas fa-bell"></i>
        </button>
        <button class="header-btn btn-save">
          déconnexion
        </button>
      </div>
    </div>
  </header>

  <!-- Main Layout -->
  <div class="main-layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <nav>
        <ul>
          <li><button class="nav-btn"><i class="fas fa-th-large"></i></button></li>
          <li><button class="nav-btn"><i class="fas fa-list"></i></button></li>
          <li><button class="nav-btn"><i class="fas fa-bookmark"></i></button></li>
          <li>
            <button class="nav-btn" (click)="switchView('cv')">
              <i class="fas fa-chart-bar"></i>
            </button>
          </li>
          <li><button class="nav-btn"><i class="fas fa-user"></i></button></li>
          <li><button class="nav-btn"><i class="fas fa-cog"></i></button></li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Tabs -->
      <div class="tabs-container">
        <div>
          <button class="tab" [class.active]="activeTab === 'recherche'"
                  (click)="toggleTab('recherche')">
            Mes critères de recherche
          </button>
          <button class="tab" [class.active]="activeTab === 'competences'"
                  (click)="toggleTab('competences')">
            Mes Compétences
          </button>
        </div>
        <div class="header-actions">
          <button class="header-btn btn-cancel">Annuler</button>
          <button class="header-btn btn-save">Enregistrer</button>
        </div>
      </div>
    
      <!-- Search Criteria Content -->
      <div class="search-criteria" *ngIf="activeTab === 'recherche'">
        <!-- Contract Type Section -->
        <div class="criteria-section">
          <h3>Type de contrat souhaité</h3>
          <div class="options-grid">
            <div class="option-checkbox" *ngFor="let contract of contractTypes">
              <input type="checkbox" 
                     [id]="contract.id"
                     [checked]="isContractTypeSelected(contract.id)"
                     (change)="toggleContractType(contract.id)">
              <label [for]="contract.id">{{ contract.name }}</label>
            </div>
          </div>
        </div>
    
        <!-- Company Type Section -->
        <div class="criteria-section">
          <h3>Type d'entreprise visées</h3>
          <div class="options-grid">
            <div class="option-checkbox" *ngFor="let company of companyTypes">
              <input type="checkbox" 
                     [id]="company.id"
                     [checked]="isCompanyTypeSelected(company.id)"
                     (change)="toggleCompanyType(company.id)">
              <label [for]="company.id">{{ company.name }}</label>
            </div>
          </div>
        </div>
    
        <!-- Mobility Section -->
        <div class="criteria-section">
          <h3>Mobilité</h3>
          <div class="mobility-section">
            <div class="option-checkbox" *ngFor="let mobility of mobilityOptions">
              <input type="checkbox" 
                     [id]="mobility.id"
                     [checked]="isMobilityOptionSelected(mobility.id)"
                     (change)="toggleMobilityOption(mobility.id)">
              <label [for]="mobility.id">{{ mobility.name }}</label>
            </div>
          </div>
        </div>
      </div>
    
      <!-- Competences Content -->
      <div class="search-criteria" *ngIf="activeTab === 'competences'">
        <div class="criteria-section">
          <h2>Choisissez le secteur de compétences qui correspond à votre domaine d'expertise <span class="text-sm text-gray-500">(Choisissez 3 maximum)</span></h2>
          
          <!-- Main sectors -->
          <div class="options-grid">
            <div class="option-checkbox" *ngFor="let sector of mainSectors">
              <input type="checkbox" 
                     [id]="sector.id"
                     [checked]="isSectorSelected(sector.id)"
                     (change)="toggleSector(sector.id)"
                     [disabled]="!isSectorSelected(sector.id) && selectedSectors.length >= 3">
              <label [for]="sector.id">{{ sector.name }}</label>
            </div>
          </div>
      
          <!-- Secondary sectors -->
          <div class="options-grid mt-4">
           
            <div class="option-checkbox" *ngFor="let sector of secondarySectors">
              <input type="checkbox" 
                     [id]="sector.id"
                     [checked]="isSectorSelected(sector.id)"
                     (change)="toggleSector(sector.id)"
                     [disabled]="!isSectorSelected(sector.id) && selectedSectors.length >= 3">
              <label [for]="sector.id">{{ sector.name }}</label>
            </div>
          </div>
      
          <!-- Selected sectors tags -->
          <div class="selected-sectors-tags mt-4" *ngIf="selectedSectors.length > 0">
            
            <div class="sector-tag" *ngFor="let sectorId of selectedSectors">
              <span>{{ getSectorName(sectorId) }}</span>
              <button class="tag-remove" (click)="toggleSector(sectorId)">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
      
          <!-- Digital IT Skills section (shown when Digital-IT is selected) -->
          <div class="digital-skills mt-6" *ngIf="isSectorSelected('digital')">
         
          <div class="ab">
            <p>Digital - IT</p>
            <div class="aa">
            <div class="skills-category" *ngFor="let skillCategory of digitalSkills">
             
              <div class="skill-header" 
                   [class.active]="isSkillCategoryActive(skillCategory.id)"
                   (click)="setActiveSkillCategory(skillCategory.id)">
                <span>{{ skillCategory.name }}</span>
                <i class="fas fa-plus"></i>
              </div>
           
           
            </div>
          </div>
          </div>
          </div>
        </div>
      </div>
      <div class="opportunities">
       
      
        
          <div class="filters">
            <h2>Opportunités <span>(4 offres)</span></h2>
            
            <button>Digital IT ▼</button>
            <button>Opportunités ▼</button>
          
        </div>
      
        <div class="opportunities-list">
          <div class="opportunity-card" *ngFor="let offer of offers">
            <div class="card-header">
              <h3>Web Designer <span>il y a 2h</span></h3>
              <div class="icons">
                <i class="icon-envelope"></i>
                <i class="icon-bookmark"></i>
              </div>
            </div>
            <div class="card-body">
              <span class="match-percentage">90%</span>
              <span class="profile-match">correspondant à ton profil</span>
              <p>
                I need a redesign done on some pages to just bring them up to be modern.
                Simple edits on Figma - Just looking for someone to knock them out tonight.
              </p>
              <div class="tags">
                <span>Web design</span>
                <span>Figma</span>
                <span>Dev</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      

    </main>
  </div>
</div>